<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=NTR&Suranna&display=swap" rel="stylesheet">

<style>
* {box-sizing: border-box;}
.pulsing-2 {margin: 0 auto;  top:100px; width:100px;  height:100px;  border-radius: 50%;  background:red;  box-shadow: 0 0 0 0 #0004;  animation:pl2 1.5s infinite linear;  position: relative;}
.pulsing-2:before,.pulsing-2:after {  content:"";  position: absolute;  inset:0;  border-radius: inherit;  box-shadow: 0 0 0 0 #0004;  animation: inherit;  animation-delay: -0.5s;}
.pulsing-2:after {  animation-delay: -1s;}
@keyframes pl2 {    100% {box-shadow: 0 0 0 40px #0000}}

body {width:360px; margin:auto; font-family: 'NTR', 'Suranna',serif; }
.padyam { color:blue; }
.tika {color:red; display:block}
.tippani {color:green; display:block}
#skandas {color:red; margin-top:100px; }
#fldiv {width:50px; height:50px; border-radius:25px; background:red; position:fixed; top:0px; margin-left:3px; z-index:10; color:white; font-size:1small; text-align:center;   }
#fldiv1 {width:50px; height:50px; border-radius:25px; background:green; position:fixed; top:0px; margin-left:307px; z-index:10; color:white; font-size:1small; text-align:center;   }
#fldiv2 {width:40px; height:40px; border-radius:25px; background:blue; position:fixed; top:50px; margin-left:250px; z-index:10; color:white; font-size:1small; text-align:center;  display:none }
#fldiv3 {width:40px; height:40px; border-radius:25px; background:blue; position:fixed; top:50px; margin-left:60px; z-index:10; color:white; font-size:1small; text-align:center;  display:none  }
.header {top:0; position:fixed; background:white; width:360px }
#ghatlist{margin-top:100px;}
#ghatdata{margin-top:100px; margin-left:10px;}
#ghatname {margin-top:0px;}
#footer{  bottom:0; height:30px; display:block; display: inline-block; display: none; zoom: 1; vertical-align: top; font-size: large; text-align:center}
#left, #middle, #right {display: inline-block; padding:0}
#left {width: 90px; background: red; color:white; border:none}
#right {width: 90px; background: red ; color:white; border:none}
.chkboxs {display:none}
</style>
</head>
<body>
<div class="pulsing-2" id='loader' style='display: block'></div>

<div id='afterload' style='display:none; '>



<div id='skandas'>
<table align=center>
<tr id='1' onclick='skandano(this.id)'><td> ప్రథమ స్కంధము
<tr id='2' onclick='skandano(this.id)'><td>ద్వితీయ స్కంధము
<tr id='3' onclick='skandano(this.id)'><td> తృతీయ స్కంధము
<tr id='4' onclick='skandano(this.id)'><td> చతుర్థ స్కంధము
<tr id='5.1' onclick='skandano(this.id)'><td> పంచమ స్కంధము - పూర్వ
<tr id='5.2' onclick='skandano(this.id)'><td> పంచమ స్కంధము - ఉత్తర
<tr id='6' onclick='skandano(this.id)'><td> షష్ఠ స్కంధము
<tr id='7' onclick='skandano(this.id)'><td> సప్తమ స్కంధము
<tr id='8' onclick='skandano(this.id)'><td> అష్టమ స్కంధము
<tr id='9' onclick='skandano(this.id)'><td> నవమ స్కంధము
<tr id='10.1' onclick='skandano(this.id)'><td> దశమ స్కంధము - పూర్వ
<tr id='10.2' onclick='skandano(this.id)'><td> దశమ స్కంధము - ఉత్తర
<tr id='11' onclick='skandano(this.id)'><td> ఏకాదశ స్కంధము
<tr id='12' onclick='skandano(this.id)'><td> ద్వాదశ స్కంధము
</table>
</div>
<div id='ghatlist'></div>

<div class='header'>
<div id='fldiv' onclick='skshow()'>స్కం</div>
<div id='fldiv1' onclick='ghshow()'>ఘ</div>
<div id='fldiv2' onclick='nxt()'>Next</div>
<div id='fldiv3' onclick='pre()'>Prev</div>
<p  id='ghatname' align='center'>తెలుగుభాగవతం</p>
<div class='chkboxs' style='margin-left:125px; margin-top:-24px;'>
<input  type='checkbox' checked id='tik' onclick='sh()'>టీక</input>
<input  type='checkbox' checked id='tip' onclick='sh1()'>టిప్పణి </input>
</div>
</div>
<div id='ghatdata'></div>
<div id='footer'>
   <button id="left" onclick='pre()'>వెనుకకు</button>
   <button id="right" onclick='nxt()'>ముందుకు</button>
</div>

</div>
<script>
function nxt(){
ghsele = ghsele+1
ghatselect(ghsele)
}

function pre(){
ghsele = ghsele -1
ghatselect(ghsele)
}

function skshow(){
document.querySelector('.chkboxs').style.display='none'
document.getElementById('skandas').style.display='block' 
document.getElementById('ghatdata').innerHTML=''
document.getElementById('ghatname').innerHTML='తెలుగుభాగవతం'
document.getElementById('footer').style.display='none'
document.getElementById('ghatlist').style.display='none'
document.getElementById('fldiv2').style.display='none'
document.getElementById('fldiv3').style.display='none'
document.getElementById('ghatlist').style.display='none'

}

function ghshow(){ 
document.querySelector('.chkboxs').style.display='none'

document.getElementById('skandas').style.display='none' 
document.getElementById('ghatdata').innerHTML=''
document.getElementById('ghatname').innerHTML='తెలుగుభాగవతం'
document.getElementById('ghatlist').style.display='block'
document.getElementById('footer').style.display='none'
document.getElementById('fldiv2').style.display='none'
document.getElementById('fldiv3').style.display='none'
//skselect=0
}
function skandano(ba){
document.querySelector('.chkboxs').style.display='none'

skselect = ba*1
ghats = tempData.filter(a=> a.sk ===ba*1)
maxValue = Math.max.apply(null,ghats.map(function(o) { return o.gh; }));
ghatnames='<table align=center>'
for (i=1; i<maxValue+1; i++){
ghatnames += `<tr id=${i} onclick='ghatselect(this.id)' ><td> ${i}<td> ${ ghats.filter(a => a.gh === i)[0].ghatta} `
}
ghatnames += "</table>"
document.getElementById('ghatlist').innerHTML=ghatnames
document.getElementById('ghatlist').style.display='block'
document.getElementById('skandas').style.display='none'
document.getElementById('footer').style.display='none'
}
 url = 'https://script.google.com/macros/s/AKfycbwgoZT4fWoP3D4XSrt3CcLL5O7nKo5CDC6nnWt1a3sXZEnT2mzMf5rcVk0wxOJIeIWBvA/exec'
            async function getMyData() {
                response = await fetch(url)
                data = await response.json()
                tempData = data["user"] 
                tempData.length>0? (document.getElementById('loader').style.display="none",
            document.getElementById('afterload').style.display="block") :""
                
                }
getMyData()

//tempData.filter(a=> a.padyam.includes('యడిగిన'))

function sh(){document.querySelectorAll('.tika').forEach(function(el) {   el.style.display = el.style.display =='none' ? 'block' : 'none';});}
function sh1(){document.querySelectorAll('.tippani').forEach(function(el) {   el.style.display = el.style.display =='none' ? 'block' : 'none';});}
function ghatselect(a){
ghsele = a*1
if (ghsele<1){ghsele=1;}
if (ghsele>maxValue){ghsele=maxValue;}
document.getElementById('footer').style.display='block'
document.getElementById('fldiv2').style.display='block'
document.getElementById('fldiv3').style.display='block'
ghat = tempData.filter(a=> a.sk ===skselect & a.gh ===ghsele)
todiv=''
ghat.forEach(function (a)  {todiv += `<p class='padyam'> ${a.padyano} <br> ${a.padyam.replace(/(?:\r\n|\r|\n)/g, '<br>')}</p>
<p class='tika'> టీక<br> ${a.tika} </p> <p class='tippani'> టిప్పణి<br> ${a.tippani}`})
document.getElementById('ghatdata').innerHTML=todiv
document.getElementById('ghatname').innerHTML=ghat[0].skanda +'<br>'+ghsele+'-'+ghat[0].ghatta
document.getElementById('skandas').style.display='none'
document.getElementById('ghatlist').style.display='none'
window.scrollTo(0, 0);
document.getElementById('tik').checked = true
document.getElementById('tip').checked = true
document.querySelector('.chkboxs').style.display='block'
}
</script>
</body>
</html>

